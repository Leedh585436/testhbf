<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width-device width, initial-scale=1">
	<title>Calendrier</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
</head>

<body>
	<div class="header" id="header">
		<div class="width-95 justify-content-center">
			<div class="row mb-4">
				<img class="my-auto ml-1" height="80px" src="images/LogoArcanin.png">

				<a class="my-auto ml-auto mr-1" href="login"><img id="log" height="40" src="images/login1.png"></a>
			</div>
		</div>

		<div class="posb" style="position: absolute; bottom: 0px;" id="menu">
			<nav class="navbar navbar-expand-md navbar-dark width-100" role="navigation">
				<div class="width-100">
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse width-100" id="collapsibleNavbar">
						<ul class="navbar-nav width-100">
							<li class="nav-item width-20"><center><a id="nav1" class="nav-link" href="" title="Accueil">Accueil</a></center></li>
							<li class="nav-item width-20"><center><a id="nav2" class="nav-link" href="" title="Presentation">Pr√©sentation</a></center></li>
			          		<li class="nav-item width-20"><center><a id="nav3" class="nav-link" href="" title="Les tarifs">Les Tarifs</a></center></li>
			          		<li class="nav-item width-20"><center><a id="nav4" class="nav-link" href="" title="Le calendrier">Le Calendrier</a></center></li>
			          		<li class="nav-item width-20"><center><a id="nav5" class="nav-link" href="" title="Les cours">Les Cours</a></center></li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
	</div>
	<div class="row justify-content-center">
		<h1>Le Calendrier</h1>
	</div>
	<div class="row justify-content-center">
		<p>Blabla presentation generale planning</p>
	</div>
	<div class="row justify-content-left">
		<div class="grid-cont3">
			<div class="grid-cursor grid-bord1" id="prev"><img src="images/dog2.png" class="grid-dog" alt="P"></div>
			<div class="grid-default grid-bord1" id="week"></div>
			<div class="grid-cursor grid-bord1" id="next"><img src="images/dog1.png" class="grid-dog" alt="N"></div>
		</div>
	</div>
	<div class="row justify-content-center">
		<div class="grid-cont1">
			<div class="grid-day grid-default" id="button"></div>
			<div class="grid-day grid-default" id="mon"></div>
			<div class="grid-day grid-default" id="tue"></div>
			<div class="grid-day grid-default" id="wed"></div>
			<div class="grid-day grid-default" id="thu"></div>
			<div class="grid-day grid-default" id="fri"></div>
			<div class="grid-day grid-default" id="sat"></div>
		</div>
		<div class="grid-cont2">
			<div class="grid-9 grid-default" id="h9">9h - 10h</div>
			<div class="grid-10 grid-default" id="h10">10h - 11h</div>
			<div class="grid-11 grid-default" id="h11">11h - 12h</div>
			<div class="grid-12 grid-default" id="h12">12h - 13h</div>
			<div class="grid-13 grid-default" id="h13">13h - 14h</div>
			<div class="grid-14 grid-default" id="h14">14h - 15h</div>
			<div class="grid-15 grid-default" id="h15">15h - 16h</div>
			<div class="grid-16 grid-default" id="h16">16h - 17h</div>
			<div class="grid-17 grid-default" id="h17">17h - 18h</div>
			<div class="grid-18 grid-default" id="h18">18h - 19h</div>
			<div class="grid-12b"></div>
			<div class="grid-9 grid-cursor grid-bord2" id="mon9"><img src="images/c0.png" class="grid-dog" alt="cours" id="mon9i"></div>
			<div class="grid-10 grid-cursor grid-bord2" id="mon10"><img src="images/c0.png" class="grid-dog" alt="cours" id="mon10i"></div>
			<div class="grid-11 grid-cursor grid-bord2" id="mon11"><img src="images/c0.png" class="grid-dog" alt="cours" id="mon11i"></div>
			<div class="grid-13 grid-cursor grid-bord2" id="mon13"><img src="images/c0.png" class="grid-dog" alt="cours" id="mon13i"></div>
			<div class="grid-14 grid-cursor grid-bord2" id="mon14"><img src="images/c0.png" class="grid-dog" alt="cours" id="mon14i"></div>
			<div class="grid-15 grid-cursor grid-bord2" id="mon15"><img src="images/c0.png" class="grid-dog" alt="cours" id="mon15i"></div>
			<div class="grid-16 grid-cursor grid-bord2" id="mon16"><img src="images/c0.png" class="grid-dog" alt="cours" id="mon16i"></div>
			<div class="grid-17 grid-cursor grid-bord2" id="mon17"><img src="images/c0.png" class="grid-dog" alt="cours" id="mon17i"></div>
			<div class="grid-18 grid-cursor grid-bord2" id="mon18"><img src="images/c0.png" class="grid-dog" alt="cours" id="mon18i"></div>
			<div class="grid-9 grid-cursor grid-bord2" id="tue9"><img src="images/c0.png" class="grid-dog" alt="cours" id="tue9i"></div>
			<div class="grid-10 grid-cursor grid-bord2" id="tue10"><img src="images/c0.png" class="grid-dog" alt="cours" id="tue10i"></div>
			<div class="grid-11 grid-cursor grid-bord2" id="tue11"><img src="images/c0.png" class="grid-dog" alt="cours" id="tue11i"></div>
			<div class="grid-13 grid-cursor grid-bord2" id="tue13"><img src="images/c0.png" class="grid-dog" alt="cours" id="tue13i"></div>
			<div class="grid-14 grid-cursor grid-bord2" id="tue14"><img src="images/c0.png" class="grid-dog" alt="cours" id="tue14i"></div>
			<div class="grid-15 grid-cursor grid-bord2" id="tue15"><img src="images/c0.png" class="grid-dog" alt="cours" id="tue15i"></div>
			<div class="grid-16 grid-cursor grid-bord2" id="tue16"><img src="images/c0.png" class="grid-dog" alt="cours" id="tue16i"></div>
			<div class="grid-17 grid-cursor grid-bord2" id="tue17"><img src="images/c0.png" class="grid-dog" alt="cours" id="tue17i"></div>
			<div class="grid-18 grid-cursor grid-bord2" id="tue18"><img src="images/c0.png" class="grid-dog" alt="cours" id="tue18i"></div>
			<div class="grid-9 grid-cursor grid-bord2" id="wed9"><img src="images/c0.png" class="grid-dog" alt="cours" id="wed9i"></div>
			<div class="grid-10 grid-cursor grid-bord2" id="wed10"><img src="images/c0.png" class="grid-dog" alt="cours" id="wed10i"></div>
			<div class="grid-11 grid-cursor grid-bord2" id="wed11"><img src="images/c0.png" class="grid-dog" alt="cours" id="wed11i"></div>
			<div class="grid-13 grid-cursor grid-bord2" id="wed13"><img src="images/c0.png" class="grid-dog" alt="cours" id="wed13i"></div>
			<div class="grid-14 grid-cursor grid-bord2" id="wed14"><img src="images/c0.png" class="grid-dog" alt="cours" id="wed14i"></div>
			<div class="grid-15 grid-cursor grid-bord2" id="wed15"><img src="images/c0.png" class="grid-dog" alt="cours" id="wed15i"></div>
			<div class="grid-16 grid-cursor grid-bord2" id="wed16"><img src="images/c0.png" class="grid-dog" alt="cours" id="wed16i"></div>
			<div class="grid-17 grid-cursor grid-bord2" id="wed17"><img src="images/c0.png" class="grid-dog" alt="cours" id="wed17i"></div>
			<div class="grid-18 grid-cursor grid-bord2" id="wed18"><img src="images/c0.png" class="grid-dog" alt="cours" id="wed18i"></div>
			<div class="grid-9 grid-cursor grid-bord2" id="thu9"><img src="images/c0.png" class="grid-dog" alt="cours" id="thu9i"></div>
			<div class="grid-10 grid-cursor grid-bord2" id="thu10"><img src="images/c0.png" class="grid-dog" alt="cours" id="thu10i"></div>
			<div class="grid-11 grid-cursor grid-bord2" id="thu11"><img src="images/c0.png" class="grid-dog" alt="cours" id="thu11i"></div>
			<div class="grid-13 grid-cursor grid-bord2" id="thu13"><img src="images/c0.png" class="grid-dog" alt="cours" id="thu13i"></div>
			<div class="grid-14 grid-cursor grid-bord2" id="thu14"><img src="images/c0.png" class="grid-dog" alt="cours" id="thu14i"></div>
			<div class="grid-15 grid-cursor grid-bord2" id="thu15"><img src="images/c0.png" class="grid-dog" alt="cours" id="thu15i"></div>
			<div class="grid-16 grid-cursor grid-bord2" id="thu16"><img src="images/c0.png" class="grid-dog" alt="cours" id="thu16i"></div>
			<div class="grid-17 grid-cursor grid-bord2" id="thu17"><img src="images/c0.png" class="grid-dog" alt="cours" id="thu17i"></div>
			<div class="grid-18 grid-cursor grid-bord2" id="thu18"><img src="images/c0.png" class="grid-dog" alt="cours" id="thu18i"></div>
			<div class="grid-9 grid-cursor grid-bord2" id="fri9"><img src="images/c0.png" class="grid-dog" alt="cours" id="fri9i"></div>
			<div class="grid-10 grid-cursor grid-bord2" id="fri10"><img src="images/c0.png" class="grid-dog" alt="cours" id="fri10i"></div>
			<div class="grid-11 grid-cursor grid-bord2" id="fri11"><img src="images/c0.png" class="grid-dog" alt="cours" id="fri11i"></div>
			<div class="grid-13 grid-cursor grid-bord2" id="fri13"><img src="images/c0.png" class="grid-dog" alt="cours" id="fri13i"></div>
			<div class="grid-14 grid-cursor grid-bord2" id="fri14"><img src="images/c0.png" class="grid-dog" alt="cours" id="fri14i"></div>
			<div class="grid-15 grid-cursor grid-bord2" id="fri15"><img src="images/c0.png" class="grid-dog" alt="cours" id="fri15i"></div>
			<div class="grid-16 grid-cursor grid-bord2" id="fri16"><img src="images/c0.png" class="grid-dog" alt="cours" id="fri16i"></div>
			<div class="grid-17 grid-cursor grid-bord2" id="fri17"><img src="images/c0.png" class="grid-dog" alt="cours" id="fri17i"></div>
			<div class="grid-18 grid-cursor grid-bord2" id="fri18"><img src="images/c0.png" class="grid-dog" alt="cours" id="fri18i"></div>
			<div class="grid-9 grid-cursor grid-bord2" id="sat9"><img src="images/c0.png" class="grid-dog" alt="cours" id="sat9i"></div>
			<div class="grid-10 grid-cursor grid-bord2" id="sat10"><img src="images/c0.png" class="grid-dog" alt="cours" id="sat10i"></div>
			<div class="grid-11 grid-cursor grid-bord2" id="sat11"><img src="images/c0.png" class="grid-dog" alt="cours" id="sat11i"></div>
			<div class="grid-13 grid-cursor grid-bord2" id="sat13"><img src="images/c0.png" class="grid-dog" alt="cours" id="sat13i"></div>
			<div class="grid-14 grid-cursor grid-bord2" id="sat14"><img src="images/c0.png" class="grid-dog" alt="cours" id="sat14i"></div>
			<div class="grid-15 grid-cursor grid-bord2" id="sat15"><img src="images/c0.png" class="grid-dog" alt="cours" id="sat15i"></div>
			<div class="grid-16 grid-cursor grid-bord2" id="sat16"><img src="images/c0.png" class="grid-dog" alt="cours" id="sat16i"></div>
			<div class="grid-17 grid-cursor grid-bord2" id="sat17"><img src="images/c0.png" class="grid-dog" alt="cours" id="sat17i"></div>
			<div class="grid-18 grid-cursor grid-bord2" id="sat18"><img src="images/c0.png" class="grid-dog" alt="cours" id="sat18i"></div>
		</div>
	</div>
	<div class="row justify-content-center">
		<h2>Legende</h2>
	</div>
	<div class="row justify-content-center">
		<div class="grid-cont4" id="gleg">
			<div class="grid-leg2"><img src="images/ce11.png" class="grid-leg"></div>
			<div class="grid-leg2"><img src="images/ce12.png" class="grid-leg"></div>
			<div class="grid-leg2"><img src="images/ce13.png" class="grid-leg"></div>
			<div class="grid-leg2"><img src="images/ce14.png" class="grid-leg"></div>
			<div class="grid-leg2"><img src="images/ce15.png" class="grid-leg"></div>
			<div class="grid-leg2"><img src="images/ce15.png" class="grid-leg"></div>
			<div class="grid-leg2"><img src="images/ce01.png" class="grid-leg"></div>
			<div class="grid-leg2"><img src="images/ce02.png" class="grid-leg"></div>
			<div class="grid-leg2"><img src="images/ce03.png" class="grid-leg"></div>
			<div></div>
		</div>
	</div>
</body>
<footer>
	<div><img src="images/map.jpg" width="100%"></div>
	<nav class="navbar navbar-expand-sm bg-dark navbar-dark" role="navigation">
		<div class="container">
			<ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link" href="mentions-legales" title="Mentions">Mentions l√©gales</a></li>
			</ul>
		</div>
	</nav>
</footer>
</html>

<script>
	var days = ['mon','tue','wed','thu','fri','sat'];
	var days_text = ['Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi'];
	var today = new Date();
	var today_day = today.getDay();

	var hours = [9,10,11,13,14,15,16,17,18];

	var creneau = new Array(days.length * (hours.length - 1));
	for (var i = 0; i < days.length; i++) {
		for (var ii = 0; ii < hours.length - 1; ii++) {
			creneau[i * 8 + ii] = days[i] + hours[ii];
		}
	}
	var menu_nav = ['nav1','nav2','nav3','nav4','nav5'];

	var cours_test = ['c1','c2','c3','c4','c5'];
	var cours_test2 = ['Treibball','Agility','Flyball','Hooper','Education'];
	var cours_col = ['red','navy','green','purple'];
	var niveau = ['d','i','c'];
	var niveau2 = ['D√©butant','Interm√©diaire','Concours'];

	let data_event = ['c1d','c2d','c1c','c3i','c5c','c4i','c5i','c5c','c2i','c3d','c5i','c2d','c2c'];
	let data_day = ['21/02/22','21/02/22','21/02/22','21/02/22','22/02/22','22/02/22','22/02/22','23/02/22','23/02/22','25/02/22','25/02/22','26/02/22','28/02/22'];
	let data_hour = [9,10,11,15,10,16,17,18,11,13,11,15,10,11];
	let data_taken_day = ['21/02/22','23/02/22'];
	let data_taken_hour = [10,11];
	let data_nb_event = [0,5,1,5,2,1,3,1,5,1,1,2,3,1];

	var selected = new Array(54);
	for (var i = 0; i < selected.length; i++) {
		selected[i] = 0;
	}
	$(document).ready(function(){
		var viewport_width = document.documentElement.clientWidth;
		var viewport_height = Math.round(viewport_width / 3);
		var leg_height = Math.round(viewport_width * 36 / 245 * 4 / 5) + 20;
		document.getElementById('header').style.height = viewport_height + 'px';
		document.getElementById('gleg').style.height = leg_height + 'px';
		if (viewport_width < 751) {
			document.getElementById('menu').style.position = 'relative';
			document.getElementById('menu').style.bottom = null;
			var top = viewport_height - 154;
			document.getElementById('menu').style.top = top + 'px';
		}
		else {
			document.getElementById('menu').style.position = 'absolute';
			document.getElementById('menu').style.bottom = '0px';
			document.getElementById('menu').style.top = null;
		}

		set_tab();
			
		for (var i = 0; i < creneau.length; i++) {
			document.getElementById(creneau[i]).addEventListener("click",changecol);
		}

		document.getElementById('log').onmouseover = function(){this.src = "images/login2.png";};
		document.getElementById('log').onmouseout = function(){this.src = "images/login1.png";};

		for (var i = 0; i < menu_nav.length; i++) {
			document.getElementById(menu_nav[i]).onmouseover = function(){this.style.color = "black";};
			document.getElementById(menu_nav[i]).onmouseout = function(){this.style.color = "rgba(255,255,255,0.5)";};
		}
	});

	window.addEventListener('resize', function() {
		var viewport_width = document.documentElement.clientWidth;
		var viewport_height = Math.round(viewport_width / 3);
		var leg_height = Math.round(viewport_width * 36 / 245 * 4 / 5) + 20;
		document.getElementById('header').style.height = viewport_height + 'px';
		document.getElementById('gleg').style.height = leg_height + 'px';
		if (viewport_width < 751) {
			document.getElementById('menu').style.position = 'relative';
			document.getElementById('menu').style.bottom = null;
			var top = viewport_height - 154;
			document.getElementById('menu').style.top = top + 'px';
		}
		else {
			document.getElementById('menu').style.position = 'absolute';
			document.getElementById('menu').style.bottom = '0px';
			document.getElementById('menu').style.top = null;
		}
	});


	$('#prev').click(function(){
		var ndate = today.getTime() - 7 * 24 * 3600000;
		today = new Date(ndate);
		today_day = today.getDay();
		set_tab();
	});

	$('#next').click(function(){
		var ndate = today.getTime() + 7 * 24 * 3600000;
		today = new Date(ndate);
		today_day = today.getDay();
		set_tab();
	});

	
	function changecol(){
		var idim = this.id + 'i';
		var estvide = document.getElementById(idim).src.slice(-6);
		var estcomplet = document.getElementById(this.id).style.cursor;
		if (estvide != 'c0.png' && estcomplet != 'default') {
			for (var i = 0; i < days.length; i++) {
				for (var j = 0; j < hours.length; j++) {
					if (this.id == days[i] + hours[j]) {
						var num = 9 * i + (j + 1);
						var idimsrc = document.getElementById(idim).src.slice(-8);
						idimsrc = idimsrc.replace('/','');
						if (selected[num-1] == 0) {
							selected[num-1] = 1;
							this.style.backgroundColor = '#444444';
							idimsrc = idimsrc.replace('.png','1.png');
							idimsrc = 'images/' + idimsrc;
							document.getElementById(idim).src = idimsrc;
						} else {
							selected[num-1] = 0;
							this.style.backgroundColor = 'ghostwhite';
							idimsrc = idimsrc.replace('1.png','.png');
							idimsrc = 'images/' + idimsrc;
							document.getElementById(idim).src = idimsrc;
						}
						i = days.length;
						j = hours.length;
					}
				}
			}
		}
	}

	function date_new(date,i,j){
		let dms = date.getTime() + (i - j + 1) * 24 * 3600000;
		return new Date(dms);
	}

	function date_week(date,j){
		let debut = date_new(date,0,j);
		let fin = date_new(date,6,j);
		return date_return(debut) + " - " + date_return(fin);
	}

	function date_return(date){
		let d = date;
		d = ['0' + d.getDate(),'0' + (d.getMonth() + 1),'' + d.getFullYear()].map(component => component.slice(-2)); // prend les 2 derniers chiffres de chaque composant
		// joindre les composants en date
		return d.slice(0, 3).join('/');
	}

	function set_tab(){
		document.getElementById('week').innerHTML = date_week(today,today_day);
		var week_day = new Array();
		for (var i = 0; i < days.length; i++) {
			var days_date = date_new(today,i,today_day);
			document.getElementById(days[i]).innerHTML = days_text[i] + "<br>" + date_return(days_date);
			week_day[i] = date_return(days_date);
			for (var j = 0; j < hours.length; j++) {
				var dh = days[i] + hours[j] + 'i';
				var dh2 = days[i] + hours[j];
				var num = 9 * i + (j + 1);
				var valtest = check_event_memb(dh,dh2,week_day[i],hours[j],num);
				for (var k = 0; k < cours_test.length; k++) {
					if ((valtest == (cours_test[k] + niveau[0]))||(valtest == (cours_test[k] + niveau[1]))||(valtest == (cours_test[k] + niveau[2]))) {
						document.getElementById(dh).alt = cours_test2[k];
						k = cours_test.length;
					}
				}
			}
		}
	}

	function check_event(dh,dh2,week_day,hour) {
		for (var check_event_i = 0; check_event_i < data_day.length; check_event_i++) {
			if (week_day == data_day[check_event_i] && hour == data_hour[check_event_i]) {
				if (data_nb_event[check_event_i] == 5) {
					document.getElementById(dh).src = 'images/' + data_event[check_event_i] + '1.png';
					document.getElementById(dh2).style.backgroundColor = 'pink';
					document.getElementById(dh2).style.cursor = 'default';
					return 'c0';
				} else {
					document.getElementById(dh).src = 'images/' + data_event[check_event_i] + '.png';
					document.getElementById(dh2).style.backgroundColor = 'ghostwhite';
					document.getElementById(dh2).style.cursor = "url('images/p20.png'), pointer";
					return data_event[check_event_i];
				}
			}
		}
		document.getElementById(dh).alt = '';
		document.getElementById(dh).src = 'images/c0.png';
		document.getElementById(dh2).style.backgroundColor = 'ghostwhite';
		document.getElementById(dh2).style.cursor = 'default';
		return 'c0';
	}

	function check_event_memb(dh,dh2,week_day,hour,num){	
		for (var check_event_i = 0; check_event_i < data_day.length; check_event_i++) {
			if (week_day == data_day[check_event_i] && hour == data_hour[check_event_i]) {
				for (var check_event_memb_i = 0; check_event_memb_i < data_taken_day.length; check_event_memb_i++) {
					if (week_day == data_taken_day[check_event_memb_i] && hour == data_taken_hour[check_event_memb_i]) {
						document.getElementById(dh).src = 'images/' + data_event[check_event_i] + '1.png';
						document.getElementById(dh2).style.backgroundColor = '#444444';
						document.getElementById(dh2).style.cursor = "url('images/p20.png'), pointer";
						selected[num-1] = 1;
						return data_event[check_event_i];
					}
				}
				if (data_nb_event[check_event_i] == 5) {
					document.getElementById(dh).src = 'images/' + data_event[check_event_i] + '1.png';
					document.getElementById(dh2).style.backgroundColor = 'pink';
					document.getElementById(dh2).style.cursor = 'default';
					return 'c0';
				} else {
					document.getElementById(dh).src = 'images/' + data_event[check_event_i] + '.png';
					document.getElementById(dh2).style.backgroundColor = 'ghostwhite';
					document.getElementById(dh2).style.cursor = "url('images/p20.png'), pointer";
					return data_event[check_event_i];
				}
			}
		}
		document.getElementById(dh).alt = '';
		document.getElementById(dh).src = 'images/c0.png';
		document.getElementById(dh2).style.backgroundColor = 'ghostwhite';
		document.getElementById(dh2).style.cursor = 'default';
		return 'c0';
	}

	function mouseovernav(){
		this.style.color = 'black';
	}
</script>
